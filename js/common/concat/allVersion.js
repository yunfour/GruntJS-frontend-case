/*! gruntTest 2014-11-05 */
define("common/addTestDeviceDialog/0.0.1/addTestDeviceDialog",["$","common/dialog/0.0.1/dialog"],function(a){function b(a){function b(a,b,c){a?(i.removeClass().addClass("com-form-explain com-form-explain-block com-form-explain-hasIco com-form-explain-"+b),i.find("i.com-ico").removeClass().addClass("com-ico com-form-ico com-form-ico-"+b),i.find("span").html(c),i.show()):i.hide()}var f,g=c(e),h=g.find("input[name=imeicode]"),i=g.find("div.com-form-explain"),j=new d({titleText:"添加测试设备",content:g});g.on("click","a.J-confirmBtn",function(){return"true"===g.attr("ajaxlock")?!1:(b(!1),""===c.trim(h.val())?(b(!0,"err","请输入imei码！"),!1):(b(!0,"loading","正在添加设备..."),g.attr("ajaxlock","true"),void(f=c.getJSON("jsp/addTestDevice.jsp",{imeicode:encodeURIComponent(c.trim(h.val())),r:Math.random()},function(c){g.attr("ajaxlock","false"),"1"===c.status?(b(!0,"success","测试设备添加成功！"),window.setTimeout(function(){j.hide(),"function"==typeof a&&a(c.data)},1e3)):b(!0,"warn",c.message)}))))}),g.on("click","a.J-cancelBtn",function(){j.hide()}),j.on("hide",function(){g.off(),f&&f.abort&&f.abort(),j.destroy(),j=null,g=null,h=null,i=null}),j.setSize(500,"auto"),j.show()}var c=a("$"),d=a("common/dialog/0.0.1/dialog"),e=['<div style="padding: 30px 0">','<div class="com-form-item" style="padding-left:110px">','<label class="com-label" style="width:100px">imei码：</label>','<input class="com-input" type="text" name="imeicode" value="" style="width:280px" />','<div class="com-form-explain com-form-explain-block com-form-explain-hasIco" style="display:none"><i class="com-ico com-form-ico"></i><span></span></div>',"</div>",'<div style="padding:25px 0 0;text-align:center;">','<a class="J-confirmBtn com-btn com-btn-blue com-btn-middling" href="javascript:;">&nbsp;&nbsp;&nbsp;&nbsp;确&nbsp;&nbsp;&nbsp;&nbsp;定&nbsp;&nbsp;&nbsp;&nbsp;</a>','<a class="J-cancelBtn com-btn com-btn-grey com-btn-middling" href="javascript:;" style="margin-left:17px">&nbsp;&nbsp;&nbsp;&nbsp;取&nbsp;&nbsp;&nbsp;&nbsp;消&nbsp;&nbsp;&nbsp;&nbsp;</a>',"</div>","</div>"].join("");return b}),define("common/dialog/0.0.1/dialog",["$","base/createClass/1.0.2/createClass","components/widget/0.0.1/widget","components/dialog/1.0.1/dialog"],function(a){function b(a){var c,d,e=b._dialogObj;e||(e=new h({mask:!0,titleText:"网页信息",content:['<p class="J-alterTipText" style="padding:15px 0 30px;margin:0;font-size:14px;color:#666;line-height:1.5;text-align:center;"></p>','<div style="padding:15px 0;text-align:center;font-size:13px;">','<a class="J-confirmBtn com-btn com-btn-blue com-btn-middling" href="javascript:;">&nbsp;&nbsp;&nbsp;&nbsp;确&nbsp;&nbsp;&nbsp;&nbsp;定&nbsp;&nbsp;&nbsp;&nbsp;</a>',"</div>"].join("")}),c=e.getAttr("widgetEle"),b._dialogObj=e,c.on("click","a.J-confirmBtn",function(){e.hide()})),d=e.getAttr("dialogBdEle"),d.find("p.J-alterTipText").html(a),e.show()}function c(a,b){var d,e,f=c._dialogObj;f||(f=new h({mask:!0,titleText:"确认信息",content:['<p class="J-alterTipText" style="padding:15px 0 30px;margin:0;font-size:14px;color:#666;line-height:1.5;text-align:center;"></p>','<div style="padding:15px 0;text-align:center;font-size:13px;">','<a class="J-confirmBtn com-btn com-btn-blue com-btn-middling" href="javascript:;">&nbsp;&nbsp;&nbsp;&nbsp;确&nbsp;&nbsp;&nbsp;&nbsp;定&nbsp;&nbsp;&nbsp;&nbsp;</a>','<a class="J-cancelBtn com-btn com-btn-grey com-btn-middling" href="javascript:;" style="margin-left:17px">&nbsp;&nbsp;&nbsp;&nbsp;取&nbsp;&nbsp;&nbsp;&nbsp;消&nbsp;&nbsp;&nbsp;&nbsp;</a>',"</div>"].join("")}),d=f.getAttr("widgetEle"),f._dialogObj=f,d.on("click","a.J-confirmBtn",function(){f.hide(),"function"==typeof b&&b(!0)}),d.on("click","a.J-cancelBtn",function(){f.hide(),"function"==typeof b&&b(!1)}),d.on("click","a.com-dialog-close",function(){"function"==typeof b&&b(!1)})),e=f.getAttr("dialogBdEle"),e.find("p.J-alterTipText").html(a),f.show()}var d=a("$"),e=a("base/createClass/1.0.2/createClass"),f=(a("components/widget/0.0.1/widget"),a("components/dialog/1.0.1/dialog")),g=['<div class="com-dialog">','<h4 class="com-dialog-title"></h4>','<div class="com-dialog-bd"></div>','<a class="com-ico com-ico-close com-dialog-close" href="javascript:;" title="点击关闭窗口"></a>',"</div>"].join(""),h=e({superClass:f,attrs:{template:g},init:function(a){var b=this;a=d.extend({titleText:"对话框",mask:!0},a),b.render(),b.setSize(400,"auto").setTitle(a.titleText),a.content&&b.append(a.content),b.setAttr(a)},methods:{bindUI:function(){var a=this,b=a.getAttr("template"),c=a.getAttr("widgetEle");a.superClass.prototype.bindUI.apply(a),c.on("click","a.com-dialog-close",function(){a.hide()}),a.on("render",function(){c.html(b),c.css({background:"none"})})},setTitle:function(a){var b=this,c=b.getAttr("widgetEle"),d=b.getAttr("titleEle");return a=a||b.getAttr("titleText"),d||(d=c.find(".com-dialog-title"),b.setAttr(d)),b.setAttr("titleText",a),d.html(a),b},append:function(a){var b=this,c=b.getAttr("widgetEle"),d=b.getAttr("dialogBdEle");return d||(d=c.find("div.com-dialog-bd"),b.setAttr("dialogBdEle",d)),d.append(a),b}}});return h.alert=b,h.confirm=c,h}),define("common/selectProvince/0.0.1/selectProvince",["$","base/createClass/1.0.1/createClass","base/pubSub/1.0.0/pubSub","components/toolTip/0.0.1/toolTip"],function(a){var b=a("$"),c=a("base/createClass/1.0.1/createClass"),d=a("base/pubSub/1.0.0/pubSub"),e=a("components/toolTip/0.0.1/toolTip"),f=['<form class="com-form" style="width:400px;padding:20px">','<div class="com-form-item" style="padding-left:80px">','<label class="com-label com-checkbox-group" style="width:70px;color:#56c1ff;text-align:left;top:2px;cursor:pointer;"><input type="checkbox" name="area" value="华东"> 华东</label>','<div class="com-checkbox-group">','<label><input type="checkbox" name="province" value="山东"> 山东</label>','<label><input type="checkbox" name="province" value="江苏"> 江苏</label>','<label><input type="checkbox" name="province" value="安徽"> 安徽</label>','<label><input type="checkbox" name="province" value="浙江"> 浙江</label>','<label><input type="checkbox" name="province" value="福建"> 福建</label>','<label><input type="checkbox" name="province" value="上海"> 上海</label>','<label><input type="checkbox" name="province" value="广东"> 广东</label>',"</div>","</div>",'<div class="com-form-item" style="padding-left:80px">','<label class="com-label com-checkbox-group" style="width:70px;color:#56c1ff;text-align:left;top:2px;cursor:pointer;"><input type="checkbox" name="area" value="华南"> 华南</label>','<div class="com-checkbox-group">','<label><input type="checkbox" name="province" value="广西"> 广西</label>','<label><input type="checkbox" name="province" value="海南"> 海南</label>','<label><input type="checkbox" name="province" value="湖北"> 湖北</label>','<label><input type="checkbox" name="province" value="湖南"> 湖南</label>','<label><input type="checkbox" name="province" value="河南"> 河南</label>','<label><input type="checkbox" name="province" value="江西"> 江西</label>','<label><input type="checkbox" name="province" value="北京"> 北京</label>','<label><input type="checkbox" name="province" value="天津"> 天津</label>',"</div>","</div>","</form>",'<a class="com-ico com-ico-16 com-ico-wrong" href="javascript:;" style="font-family:Dotum;right:10px;top:10px;font-weight:bold">x</a>'].join(""),g=c({superClass:d,init:function(a){var c,d,g,h=this;a=b.extend({},a),g=b(a.trigger).eq(0),c=new e({trigger:g.parent(),arrowPosition:7,theme:"white",tipText:f}),d=c.getAttr("tipObj").getAttr("tipEle"),h.setAttr("tipObj",c),h.setAttr("tipEle",d),d.delegate("input[type=checkbox]","click",function(){var a,c=b(this),d=!!c.attr("checked"),e=c.closest("div.com-form-item");"area"===c.attr("name")&&(a=e.find("input[name=province]"),d?a.attr("checked","checked"):a.removeAttr("checked")),h.on("select")}),d.delegate("a.com-ico-wrong","click",function(){h.hide(),h.on("close")})},methods:{show:function(){var a=this;return a.getAttr("tipObj").show(),a},hide:function(){var a=this;return a.getAttr("tipObj").hide(),a},getSelected:function(){var a=this,c=a.getAttr("tipEle"),d=[],e=c.find("input[name=province]:checked");return e.each(function(){var a=b(this);d.push(a.val())}),d}}});return g}),define("common/setAccountAuthDialog/0.0.1/setAccountAuthDialog",["components/dialog/1.0.0/dialog","$"],function(a){var b=a("components/dialog/1.0.0/dialog"),c=a("$"),d=function(a,d){var e=c(['<form style="padding:20px 40px;">',"<fieldset>","<label>选择管理级别</label>",'<div class="controls">',"<select>",'<option value="0">超级管理员</option>','<option value="1">系统管理员</option>','<option value="2">普通管理员</option>',"</select>","</div>",'<div class="controls" style="padding: 10px 0 0;">','<input type="button" class="btn" value=" 确  定 " />',"</div>","</fieldset>","<form>"].join("")),f=new b({title:"设置账户权限",width:400,content:e}),g=e.find("select"),h=e.find("input.btn"),i=function(a,b){c.post("yb/setAccoutAuth",{managerId:a,auth:b},function(a){"function"==typeof d&&d(a)},"JSON")};console.log(f),h.click(function(){i(a,g.val()),f.hide()}),f.show()};return d}),define("common/setFilter/0.0.1/setFilter",["$"],function(a){function b(a,b,d){function e(){var a,b,d,e,f={};for(var g in i)i.hasOwnProperty(g)&&(a=i[g],d=a.eq(0).prop("type").toLowerCase(),e=a.eq(0).prop("tagName").toLowerCase(),"input"===e&&("radio"===d||"checkbox"===d?(b=[],a.filter(":checked").each(function(){b.push(encodeURIComponent(c(this).val()))}),b=b.join(",")):("password"===d||"text"===d)&&(b=encodeURIComponent(a.eq(0).val()))),"textarea"===e?b=encodeURIComponent(a.eq(0).val()):"select"===e&&(b=encodeURIComponent(a.eq(0).val())),""!==c.trim(b)&&(f[g]=b));return f}function f(a,b){var c=[];for(var d in a)a.hasOwnProperty(d)&&a[d]&&c.push(d+"="+a[d]);c=c.join("&"),-1===b.indexOf("?")?b=b+"?"+c:b+=c,location.href=b}var g=b.find("input,textarea,select"),h=b.find("a.J-filterBtn"),i={},j=b.attr("data-filter-url");a=a||{},g.each(function(){var a=c(this),d=a.attr("name");i[d]||(i[d]=b.find("[name="+d+"]"))}),h.on("click",function(){var b=e();a=c.extend(a,b),a.currentPage="",f(a,j)}),d&&d.delegate("li","click",function(){var b=c(this),e=a.currentPage||d.find("li.active").data("page")||1;b.hasClass("disabled")||(b.hasClass("J-prev")?e-=1:b.hasClass("J-next")?e+=1:e=b.data("page"),a.currentPage=e,f(a,j))})}var c=a("$");return b}),define("common/showInputErr/0.0.1/showInputErr",["$"],function(a){var b=a("$"),c=function(a,c,d){var e=a.closest("div.controls"),f=e.find("span.com-form-err"),g=e.find("span.com-form-tip");0===f.size()&&(f=b('<span class="help-block com-form-err"></span>'),f.appendTo(e)),c?(f.show().text(d),g.hide()):(f.hide(),g.show())};return c}),define("common/tools/0.0.1/tools",["$"],function(a){var b=(a("$"),{});return b.isImgType=function(a){var b=/\.(jpg|jpeg|gif|png)$/i.test(a);return b},b.decimalPlace=function(a,b){if(b=parseInt(b,10),isNaN(Number(a)))throw new Error("参数 theNum 必须为数字");if(isNaN(b)||0>b)throw new Error("参数 digit 必须为大于0的数字");if(a+="",-1!==a.indexOf(".")){var c=a.split("."),d=c[1],e=b-d.length;if(0===b)a=c[0];else{if(e>0){for(;e>0;e--)d+="0";d="."+d}else d="."+d.substring(0,b);a=c[0]+d}}return a},b.isType=function(a){return function(b){return Object.prototype.toString(b)==="[object "+a+"]"}},b.isString=b.isType("String"),b.isObject=b.isType("Object"),b.isArray=b.isType("Array"),b.isNumber=b.isType("Number"),b.isFunction=b.isType("Function"),b.repeatStr=function(a,b){return new Array(b+1).join(a)},b}),define("common/validateForm/0.0.1/validateForm",["$"],function(a){var b=a("$"),c=function(a,c,d,e){var f=b(a),g=f.closest(".com-form-item"),h=g.find(".com-form-explain"),i=h.hasClass("com-form-explain-block");e=e||"&nbsp;",0===h.size()?(h=b('<div class="com-form-explain com-form-explain-hasIco"></div>'),h.appendTo(g)):(h.removeClass().addClass("com-form-explain com-form-explain-hasIco"),i&&h.addClass("com-form-explain-block")),c?(h.show(),"explain"===d?h.html('<i class="com-ico com-form-ico com-form-ico-explain"></i><span>'+e+"</span>"):""!==d&&h.addClass("com-form-explain-"+d).html('<i class="com-ico com-form-ico com-form-ico-'+d+'"></i><span>'+e+"</span>")):h.hide()},d=function(a,d){var e=b(a),f=(e.attr("name"),b.trim(e.val()));""===f&&d&&c(e,!0,"explain",d)},e=function(a,d,e){var f,g,h=b(a),i=h.attr("name"),j=b.trim(h.val()),k=(h.attr("type")||"").toLowerCase(),l=h.prop("tagName").toLowerCase(),m=(h.closest("div.com-form-item"),h.closest("form")),n=0;if(d){if(g="undefined"==typeof d.isShowSuccessTip?!0:!!d.isShowSuccessTip,h.data("is_pass_validate","false"),c(h,!1),d.required)if("text"===k||"password"===k||"hidden"===k||"textarea"===l||"select"===l)""===j&&(c(h,!0,"err",d.emptyTip||"该字段不能为空！"),n++);else if("radio"===k||"checkbox"===k){var o=m.find("input[name="+i+"]:checked");0===o.size()&&(c(h,!0,"err",d.emptyTip||"该字段不能为空！"),n++)}if(0===n&&d.compare){var p=m.find("input[name="+d.compare.fieldName+"],textarea[name="+d.compare.fieldName+"]").eq(0),q=b.trim(p.val());p.size()&&(d.compare.compareFn(j,q)||(c(h,!0,"err",d.compare.failedTip||""),n++))}if(f=d.patterns,0===n&&f&&f.constructor===Array)for(var r,s,t,u=0,v=f.length;v>u;u++)if(s=f[u],t=s.pattern,r=s.noMatchTip||"你输入的内容格式有误！",t.constructor===RegExp&&(t=function(a){return s.pattern.test(a)}),!t(j)){c(h,!0,"err",r),n++;break}if(0===n&&d.asyncVali){var w=h.data("valiXhr"),x=d.asyncVali,y=x.url,z={};z.fieldName=x.name||i,z.fieldVal=encodeURIComponent(j),z._r=Math.random(),w&&w.abort&&w.abort(),c(h,!0,"loading",""),h.data("is_pass_validate","asyncValidating"),w=b.getJSON(y,z,function(a){var b="1"===a.status;b?(g&&c(h,!0,"success",x.successTip||d.successTip||""),h.data("is_pass_validate","true")):(c(h,!0,"err",a.message||""),h.data("is_pass_validate","false")),"function"==typeof e&&e(b,a)}),h.data("valiXhr",w)}0!==n?(h.data("is_pass_validate","false"),"function"==typeof e&&e(!1)):d.asyncVali||(g&&c(h,!0,"success",d.successTip||""),h.data("is_pass_validate","true"),"function"==typeof e&&e(!0))}},f=function(a,b){var c,d,e=[];for(var f in b)d=!1,b.hasOwnProperty(f)&&(c=a.find("[name="+f+"]").eq(0),c.size()&&(d=c.data("is_pass_validate"),"true"!==d&&e.push(f)));return{isPass:0===e.length,notPassFieldsName:e}},g=function(a,b){var c;for(var d in b)b.hasOwnProperty(d)&&(c=a.find("[name="+d+"]").eq(0),c.size()&&"true"!==c.data("is_pass_validate")&&e(c,b[d]))};return{showExplain:c,showDefaultTip:d,valiFn:e,isPassVali:f,goVali:g}});