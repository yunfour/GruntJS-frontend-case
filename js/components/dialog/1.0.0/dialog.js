/*! gruntTest 2014-11-05 */
define("components/dialog/1.0.0/dialog",["$","base/createClass/1.0.0/createClass","base/singleton/1.0.0/singleton","base/pubSub/1.0.0/pubSub","./mask"],function(a){seajs.importStyle([".sea-dialog{ padding: 7px; background: #999; position: absolute; top: 0; left: 0; z-index: 10000;}",".sea-dialog-panel{ background: #fff; position: relative;}",".sea-dialog-title{ height: 30px; padding: 0 5px; margin: 0; line-height: 30px; border-bottom: 1px solid #eee; font-size: 13px; font-weight: bold; color: #333; position: relative;}",".sea-dialog-bd{ padding: 10px;}",".sea-dialog-close{ display: block; height: 14px; width: 14px; font-size: 14px; font-weight: bold; line-height: 14px; color: #333; text-align: center; font-family: Dotum; text-decoration: none; overflow: hidden; position: absolute; top: 6px; right: 6px;}",".sea-dialog-close:hover{ color: #333; text-decoration: none;}"].join(""));var b=a("$"),c=['<div class="sea-dialog">','<div class="sea-dialog-panel">','<h4 class="sea-dialog-title"></h4>','<div class="sea-dialog-bd"></div>','<a class="sea-dialog-close" href="javascript:;" title="点击关闭窗口">x</a>',"</div>","</div>"].join(""),d=a("base/createClass/1.0.0/createClass"),e=a("base/singleton/1.0.0/singleton"),f=a("base/pubSub/1.0.0/pubSub"),g=a("./mask"),h=d({superClass:f,init:function(a){var d=this,e=b(c),f=e.find("a.sea-dialog-close");a=b.extend({width:400,title:"弹出窗",position:"fixed",isShowClose:!0,mask:!0},a),d.setAttr({conf:a,dialogEle:e,dialogTitleEle:e.find("h4.sea-dialog-title"),dialogBdEle:e.find("div.sea-dialog-bd"),dialogCloseEle:f}),a.title&&d.setTitle(a.title),a.isShowClose||f.hide(),f.on("click",function(){d.hide()}),a.content&&d.getAttr("dialogBdEle").append(b(a.content)),d.setWidth(a.width),e.appendTo(document.body).hide()},methods:{setTitle:function(a){var b=this;return b.getAttr("dialogTitleEle").html(a),b.on("setTitle"),this},setWidth:function(a){var b=this;if(isNaN(a)||0>a)throw new Error("方法:setWidth() 的参数  width 需为大于0的数字");return a=Math.floor(a)-20,0>a&&(a=0),b.getAttr("dialogEle").css({width:a}),b.on("setWidth"),b},show:function(){var a=this,b=a.getAttr("conf"),c=a.getAttr("dialogEle");return c.show(),a.setPosition(),b.mask&&g.show(),a.on("show"),a},hide:function(){var a=this,b=a.getAttr("conf"),c=a.getAttr("dialogEle");return c.hide(),b.mask&&g.hide(),a.on("hide"),a},setPosition:function(a,c){var d,e,f=this,g=f.getAttr("conf"),h=b(window),i=f.getAttr("dialogEle");return d=(h.width()-i.width())/2,e=618*h.height()/1618-i.height()/2,"absolute"===g.position?e+=h.scrollTop():b.browser.msie&&"6.0"==b.browser.version&&(e+=h.scrollTop(),g.position="absolute"),0>d&&(d=0),0>e&&(e=0),a=a||d,c=c||e,i.css({left:a,top:c,position:g.position}),f}}});return h.confirm=function(a,c){var d=b(['<p style="padding:15px 0 0;margin:0;font-size:14px;color:#666;line-height:1.5;text-align:center;">'+a+"</p>",'<div style="padding:15px 0;text-align:center;font-size:13px;">','<a class="J-confirmBtn" href="javascript:;" style="color:#333;">确定</a>&nbsp;&nbsp;&nbsp;&nbsp;','<a class="J-cancelBtn" href="javascript:;" style="color:#999;">取消</a>',"</div>"].join("")),e=h.confirm._getConfirmDialogObj(),f=e.getAttr("dialogCloseEle"),g=d.find("a.J-confirmBtn"),i=d.find("a.J-cancelBtn"),j=function(a){e.hide(),"function"==typeof c&&c(a)};return e.getAttr("dialogBdEle").empty().append(d),g.on("click",function(){j(!0)}),f.on("click",function(){j(!1)}),i.on("click",function(){j(!1)}),e.show(),this},h.confirm._getConfirmDialogObj=e(new h({width:400,title:"提示"})),h.alter=function(a){{var c=b(['<p style="padding:15px 0 0;margin:0;font-size:14px;color:#666;line-height:1.5;text-align:center;">'+a+"</p>",'<div style="padding:15px 0;text-align:center;font-size:13px;">','<a class="J-confirmBtn" href="javascript:;" style="color:#333;">确定</a>',"</div>"].join("")),d=h.alter._getAlterDialogObj(),e=c.find("a.J-confirmBtn");d.getAttr("dialogCloseEle")}return d.getAttr("dialogBdEle").empty().append(c),e.on("click",function(){d.hide()}),d.show(),this},h.alter._getAlterDialogObj=e(new h({width:400,title:"提示"})),h});